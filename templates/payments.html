{% extends "base.html" %}
{% block content %}
<h2 class="fw-bold mb-4">Manage Payments</h2>
<div class="row">
    <div class="col-md-6">
        <h3 class="fw-bold mb-3">Record Payment</h3>
        <form method="POST" class="shadow-sm p-4 rounded bg-light">
            <div class="mb-3">
                <label for="student_id" class="form-label fw-bold">Student</label>
                <select class="form-control" id="student_id" name="student_id" required>
                    {% for student in students %}
                    <option value="{{ student[0] }}">{{ student[1] }} ({{ student[6] }})</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label for="class_id" class="form-label fw-bold">Class</label>
                <select class="form-control" id="class_id" name="class_id" required>
                    {% for class in classes %}
                    <option value="{{ class[0] }}">{{ class[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label for="amount" class="form-label fw-bold">Amount</label>
                <input type="number" step="0.01" class="form-control" id="amount" name="amount" required>
            </div>
            <div class="mb-3">
                <label for="payment_date" class="form-label fw-bold">Payment Date</label>
                <input type="date" class="form-control" id="payment_date" name="payment_date" required>
            </div>
            <button type="submit" class="btn btn-primary">Record Payment</button>
        </form>
    </div>
    <div class="col-md-6">
        <h3 class="fw-bold mb-3">Recent Payments</h3>
        <div class="list-group">
            {% for payment in payments %}
            <div class="list-group-item">
                <h5 class="fw-bold">{{ payment[7] }}</h5>
                <p class="mb-2">
                    Class: {{ payment[8] }}<br>
                    Amount: Rs.{{ "%.2f"|format(payment[3]) }}<br>
                    Date: {{ payment[4].strftime('%Y-%m-%d') }}
                </p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
